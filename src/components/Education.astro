---
const didYouKnow = {
    id: [
        "Indonesia adalah Negara Kepulauan Terbesar di Dunia dengan lebih dari 17.000 pulau",
        "Indonesia memiliki Gunung Berapi Terbanyak di Dunia dengan sekitar 130 gunung berapi aktif",
        "Danau Toba adalah Danau Vulkanik Terbesar di Dunia",
        "Bahasa Indonesia adalah Bahasa yang Paling Banyak Digunakan di Asia Tenggara",
        "Indonesia adalah Negara dengan Garis Pantai Terpanjang Kedua di Dunia",
        "Indonesia adalah Peraih Medali Emas Thomas Cup Terbanyak sepanjang sejarah",
        "Indonesia adalah Negara dengan Populasi Muslim Terbesar di Dunia",
        "Indonesia adalah rumah bagi lebih dari 100 hewan yang terancam punah",
        "Bunga terbesar di dunia, Rafflesia arnoldii, hidup di Indonesia",
        "Indonesia memiliki populasi 'muda' terbesar di dunia",
        "Rumah bagi lebih dari 700 bahasa dan dialek yang berbeda",
        "Indonesia adalah tempat terpanas di Cincin Api Pasifik",
        "Rumah bagi Puncak Jaya, puncak pulau tertinggi di dunia",
        "Rumah bagi Danau Toba, danau vulkanik terbesar di dunia",
        "Rumah bagi pulau bekas pemburu kepala di Kalimantan",
        "Indonesia memiliki sejarah yang unik dengan tradisi perburuan kepala di masa lalu",
        "Indonesia adalah satu-satunya tempat di dunia untuk mengamati komodo di alam liar",
        "Sumatera adalah salah satu dari hanya dua tempat di dunia untuk mengamati orangutan liar",
        "Rumah bagi Candi Borobudur, kuil Buddha terbesar di dunia",
        "Indonesia dan Monako memiliki bendera yang sama persis",
        "Pemegang Rekor Dunia Guinness untuk 'Paket mie instan terbesar'",
        "Negara berkembang pertama yang mengoperasikan sistem satelit domestik mereka sendiri",
        "Rumah bagi salah satu letusan gunung berapi modern terbesar di dunia, Gunung Tambora",
        "Indonesia masih memberlakukan hukuman mati oleh regu tembak",
        "Ada lebih dari 700 bahasa yang digunakan di Indonesia",
        "Komodo (Varanus komodoensis) hanya ditemukan di Taman Nasional Komodo",
        "Tradisi Subak, sistem irigasi tradisional di Bali, dilindungi UNESCO",
        "Populasi Muslim di Indonesia adalah yang terbesar di dunia dengan lebih dari 230 juta jiwa",
        "Dunia penerbangan Indonesia adalah salah satu yang paling berkembang pesat di Asia",
        "Indonesia adalah salah satu dari 17 negara Megadiverse di dunia",

    ],
    en: [
        "Indonesia is the Largest Archipelagic Country in the World with over 17,000 islands",
        "Indonesia has the Most Volcanoes in the World with around 130 active volcanoes",
        "Lake Toba is the Largest Volcanic Lake in the World",
        "Indonesian is the Most Widely Spoken Language in Southeast Asia",
        "Indonesia has the Second Longest Coastline in the World",
        "Indonesia is the All-Time Top Winner of Thomas Cup Gold Medals",
        "Indonesia has the Largest Muslim Population in the World",
        "Indonesia is home to more than 100 endangered animal species",
        "The world's largest flower, Rafflesia arnoldii, lives in Indonesia",
        "Indonesia has the largest 'young' population in the world",
        "Home to more than 700 different languages and dialects",
        "Indonesia is the hottest spot on the Pacific Ring of Fire",
        "Home to Puncak Jaya, the highest island peak in the world",
        "Home to Lake Toba, the largest volcanic lake in the world",
        "Home to the former headhunter islands in Kalimantan",
        "Indonesia has a unique history with headhunting traditions in the past",
        "Indonesia is the only place in the world to observe Komodo dragons in the wild",
        "Sumatra is one of only two places in the world to observe wild orangutans",
        "Home to Borobudur, the largest Buddhist temple in the world",
        "Indonesia and Monaco have the exact same flag",
        "Guinness World Record holder for 'Largest instant noodle package'",
        "The first developing country to operate their own domestic satellite system",
        "Home to one of the largest modern volcanic eruptions in the world, Mount Tambora",
        "Indonesia still enforces the death penalty by firing squad",
        "There are more than 700 languages spoken in Indonesia",
        "Komodo dragon (Varanus komodoensis) is only found in Komodo National Park",
        "Subak tradition, the traditional irrigation system in Bali, is protected by UNESCO",
        "The Muslim population in Indonesia is the largest in the world with over 230 million people",
        "Indonesia's aviation industry is one of the fastest growing in Asia",
        "Indonesia is one of the 17 Megadiverse countries in the world",
    ],
};

const content = {
    id: {
        eyebrow: "Fakta Menarik",
        title: "Tahukah Kamu?",
    },
    en: {
        eyebrow: "Fact",
        title: "Did You Know?",
    },
};
---

<section class="education section" id="education">
    <div class="container">
        <!-- Did You Know Section -->
        <div class="education__know fade-up">
            <div class="education__know-header">
                <span
                    class="section-header__eyebrow"
                    data-content-id={content.id.eyebrow}
                    data-content-en={content.en.eyebrow}
                >
                    {content.id.eyebrow}
                </span>
                <h3 class="education__know-title" id="know-title">
                    {content.id.title}
                </h3>
            </div>
            <div class="education__know-content" id="know-content">
                <p class="education__know-text" id="know-text"></p>
            </div>
        </div>
    </div>
</section>

<!-- Know Data for JS -->
<script define:vars={{ didYouKnow }}>
    window.didYouKnowData = didYouKnow;
</script>

<style>
    .education {
        background-color: var(--charcoal);
        color: var(--warm-white);
    }

    /* Override section header eyebrow color for dark background */
    .education .section-header__eyebrow {
        color: var(--terracotta);
    }

    /* Did You Know - simplified for standalone */
    .education__know {
        background: transparent;
        padding: var(--space-xl) 0;
        max-width: 800px;
        margin: 0 auto;
    }

    .education__know-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-lg);
    }

    .education__know-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: var(--space-xs);
        margin-bottom: var(--space-xl);
    }

    .education__know-icon {
        font-size: 2.5rem;
    }

    .education__know-title {
        font-size: var(--text-4xl);
        color: var(--warm-white);
        margin: 0;
    }

    .education__know-text {
        font-size: var(--text-lg);
        line-height: 1.8;
        color: rgba(250, 247, 242, 0.9);
        min-height: 60px;
        text-align: center;
    }

    .education__know-btn {
        border-color: rgba(250, 247, 242, 0.3);
        color: var(--warm-white);
    }

    .education__know-btn:hover {
        background-color: var(--terracotta);
        border-color: var(--terracotta);
    }
</style>

<script>
    import gsap from "gsap";

    const didYouKnowData = (window as any).didYouKnowData;
    const knowText = document.getElementById("know-text");
    const knowTitle = document.getElementById("know-title");
    const knowBtnText = document.getElementById("know-btn-text");

    let currentFactIndex = 0;
    let currentLang = localStorage.getItem("lang") || "en";

    function showFact() {
        const facts = didYouKnowData[currentLang];
        if (!knowText || !facts) return;

        gsap.to(knowText, {
            opacity: 0,
            y: -10,
            duration: 0.2,
            onComplete: () => {
                knowText.textContent = facts[currentFactIndex];
                gsap.to(knowText, {
                    opacity: 1,
                    y: 0,
                    duration: 0.3,
                });
            },
        });
    }

    function nextFact() {
        const facts = didYouKnowData[currentLang];
        currentFactIndex = (currentFactIndex + 1) % facts.length;
        showFact();
    }

    // Initialize
    showFact();

    // Auto rotate every 8 seconds
    setInterval(nextFact, 8000);

    // Language change handler
    window.addEventListener("langchange", (e: CustomEvent) => {
        currentLang = e.detail.lang;
        currentFactIndex = 0;
        showFact();

        // Update title and button
        if (knowTitle) {
            knowTitle.textContent =
                currentLang === "id" ? "Tahukah Kamu?" : "Did You Know?";
        }
        if (knowBtnText) {
            knowBtnText.textContent =
                currentLang === "id" ? "Fakta Lainnya" : "Another Fact";
        }
    });
</script>
