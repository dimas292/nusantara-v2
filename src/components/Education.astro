---
const didYouKnow = {
    id: [
        "Indonesia adalah Negara Kepulauan Terbesar di Dunia dengan lebih dari 17.000 pulau",
        "Indonesia memiliki Gunung Berapi Terbanyak di Dunia dengan sekitar 130 gunung berapi aktif",
        "Danau Toba adalah Danau Vulkanik Terbesar di Dunia",
        "Bahasa Indonesia adalah Bahasa yang Paling Banyak Digunakan di Asia Tenggara",
        "Indonesia adalah Negara dengan Garis Pantai Terpanjang Kedua di Dunia",
        "Indonesia adalah Peraih Medali Emas Thomas Cup Terbanyak sepanjang sejarah",
        "Indonesia adalah Negara dengan Populasi Muslim Terbesar di Dunia",
        "Indonesia adalah rumah bagi lebih dari 100 hewan yang terancam punah",
        "Bunga terbesar di dunia, Rafflesia arnoldii, hidup di Indonesia",
        "Indonesia memiliki populasi 'muda' terbesar di dunia",
        "Rumah bagi lebih dari 700 bahasa dan dialek yang berbeda",
        "Indonesia adalah tempat terpanas di Cincin Api Pasifik",
    ],
    en: [
        "Indonesia is the Largest Archipelagic Country in the World with over 17,000 islands",
        "Indonesia has the Most Volcanoes in the World with around 130 active volcanoes",
        "Lake Toba is the Largest Volcanic Lake in the World",
        "Indonesian is the Most Widely Spoken Language in Southeast Asia",
        "Indonesia has the Second Longest Coastline in the World",
        "Indonesia is the All-Time Top Winner of Thomas Cup Gold Medals",
        "Indonesia has the Largest Muslim Population in the World",
        "Indonesia is home to more than 100 endangered animal species",
        "The world's largest flower, Rafflesia arnoldii, lives in Indonesia",
        "Indonesia has the largest 'young' population in the world",
        "Home to more than 700 different languages and dialects",
        "Indonesia is the hottest spot on the Pacific Ring of Fire",
    ],
};

const row1_id = didYouKnow.id.slice(0, 6);
const row2_id = didYouKnow.id.slice(6, 12);
const row1_en = didYouKnow.en.slice(0, 6);
const row2_en = didYouKnow.en.slice(6, 12);

const content = {
    id: {
        eyebrow: "Fakta Menarik",
        title: "Tahukah Kamu?",
    },
    en: {
        eyebrow: "Fact",
        title: "Did You Know?",
    },
};
---

<section class="education section" id="education">
    <div class="container">
        <!-- Did You Know Section -->
        <div class="education__know fade-up">
            <div class="education__know-header">
                <span
                    class="section-header__eyebrow"
                    data-content-id={content.id.eyebrow}
                    data-content-en={content.en.eyebrow}
                >
                    {content.id.eyebrow}
                </span>
                <h3
                    class="education__know-title"
                    id="know-title"
                    data-content-id={content.id.title}
                    data-content-en={content.en.title}
                >
                    {content.id.title}
                </h3>
            </div>
        </div>
    </div>

    <!-- Marquee Row 1 - Scroll Left -->
    <div class="marquee-wrapper">
        <div class="marquee-content scroll-left" id="marquee-row1">
            {
                [...row1_id, ...row1_id, ...row1_id].map((item, idx) => (
                    <div class="fact-card" data-lang="id">
                        
                        <div class="fact-card__body">
                            <p>{item}</p>
                        </div>
                    </div>
                ))
            }
            {
                [...row1_en, ...row1_en, ...row1_en].map((item, idx) => (
                    <div class="fact-card" data-lang="en" style="display: none;">
                        <div class="fact-card__body">
                            <p>{item}</p>
                        </div>
                    </div>
                ))
            }
        </div>
    </div>

    <!-- Marquee Row 2 - Scroll Right -->
    <div class="marquee-wrapper">
        <div class="marquee-content scroll-right" id="marquee-row2">
            {
                [...row2_id, ...row2_id, ...row2_id].map((item, idx) => (
                    <div class="fact-card" data-lang="id">
                        <div class="fact-card__body">
                            <p>{item}</p>
                        </div>
                    </div>
                ))
            }
            {
                [...row2_en, ...row2_en, ...row2_en].map((item, idx) => (
                    <div class="fact-card" data-lang="en" style="display: none;">
                        <div class="fact-card__body">
                            <p>{item}</p>
                        </div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<style>
    .education {
        background-color: var(--charcoal);
        color: var(--warm-white);
        padding-bottom: var(--space-2xl);
        overflow: hidden;
    }

    /* Override section header eyebrow color for dark background */
    .education .section-header__eyebrow {
        color: var(--terracotta);
    }

    /* Did You Know Header */
    .education__know {
        background: transparent;
        padding: var(--space-xl) 0 var(--space-lg);
        max-width: 800px;
        margin: 0 auto;
    }

    .education__know-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: var(--space-xs);
        margin-bottom: var(--space-md);
    }

    .education__know-title {
        font-size: var(--text-4xl);
        color: var(--warm-white);
        margin: 0;
    }

    /* Marquee Styles */
    .marquee-wrapper {
        display: flex;
        width: 100vw;
        overflow: hidden;
        user-select: none;
        margin-bottom: var(--space-md);
        mask-image: linear-gradient(
            to right,
            hsl(0 0% 0% / 0),
            hsl(0 0% 0% / 1) 10%,
            hsl(0 0% 0% / 1) 90%,
            hsl(0 0% 0% / 0)
        );
    }

    .marquee-content {
        display: flex;
        gap: 20px;
        padding: 10px;
        flex-shrink: 0;
    }

    /* Animation */
    .scroll-left {
        animation: scroll-left 50s linear infinite;
    }

    .scroll-right {
        animation: scroll-right 50s linear infinite;
    }

    @keyframes scroll-left {
        from {
            transform: translateX(0);
        }
        to {
            transform: translateX(calc(-100% / 3));
        }
    }

    @keyframes scroll-right {
        from {
            transform: translateX(calc(-100% / 3));
        }
        to {
            transform: translateX(0);
        }
    }

    /* Pause on hover */
    .marquee-wrapper:hover .marquee-content {
        animation-play-state: paused;
    }

    /* Fact Card Styles */
    .fact-card {
        background: rgba(250, 247, 242, 0.05);
        border: 1.5px solid rgba(250, 247, 242, 0.1);
        border-radius: 20px;
        width: 320px;
        min-height: 160px;
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: var(--space-sm);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transition:
            transform 0.3s ease,
            border-color 0.3s ease,
            background 0.3s ease;
    }

    .fact-card:hover {
        transform: translateY(-5px);
        border-color: var(--terracotta);
        background: rgba(250, 247, 242, 0.08);
    }

    .fact-card__body p {
        font-family: var(--font-body);
        font-size: var(--text-base);
        line-height: 1.6;
        margin: 0;
        color: rgba(250, 247, 242, 0.9);
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .fact-card {
            width: 280px;
            min-height: 140px;
            padding: 20px;
        }

        .fact-card__body p {
            font-size: var(--text-sm);
        }

        .education__know-title {
            font-size: var(--text-3xl);
        }
    }
</style>

<script>
    // Language change handler for marquee cards
    function updateMarqueeLanguage(lang: string) {
        const allCards = document.querySelectorAll(".fact-card");
        allCards.forEach((card) => {
            const cardLang = card.getAttribute("data-lang");
            if (cardLang === lang) {
                (card as HTMLElement).style.display = "flex";
            } else {
                (card as HTMLElement).style.display = "none";
            }
        });
    }

    // Initialize with current language
    const currentLang = localStorage.getItem("language") || "id";
    updateMarqueeLanguage(currentLang);

    // Listen for language changes
    window.addEventListener("langchange", ((e: CustomEvent) => {
        updateMarqueeLanguage(e.detail.lang);
    }) as EventListener);
</script>
